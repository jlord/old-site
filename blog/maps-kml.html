<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="jlord">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jlord / KML from Google Maps</title>
    <link rel="shortcut icon" href="../assets/favicon.png">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,900|Source+Code+Pro:500' rel='stylesheet' type='text/css'>
    <link href='../assets/style.css' rel='stylesheet'>
    <link href='../assets/highlight.css' rel='stylesheet'>
    <script src="../assets/js/highlight.js"></script>
  </head>
  <body class="post-template">
    <div class="sideways meta">Jessica Lord, open web developerâ€”designer</div>
    <div class="main-container">
      <header>
		<div class="links left">
			<span>
				<a href="/">home</a>
				<a href="/about.html">about</a>
			</span>
		</div>
	<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
		viewBox="0 0 135.9 197.6" enable-background="new 0 0 135.9 197.6" xml:space="preserve" width="65">
	<g>
		<g>
			<path fill="#357EFC" d="M0,124.1c9.6,0.4,19.3-0.2,28.6-2.5c9.3-2.2,18-6.4,25.2-12.4c7.2-6,12.7-13.9,16.5-22.5
				c1.9-4.3,3.5-8.7,5-13.3c0.7-2.3,1.4-4.6,2-6.9l1-3.5l0.6-1.8c0.1-0.3,0.2-0.6,0.4-0.9c0.2-0.3,0.2-0.6,0.7-1.1l0,0l0.1-0.1
				l0.2-0.1c0.2,0,0.4,0,0.5,0c0.1,0,0.2,0.1,0.3,0.1c0.1,0.1,0.2,0.2,0.3,0.2c0.1,0.1,0.2,0.2,0.3,0.4c0.2,0.2,0.3,0.4,0.5,0.6
				c0.3,0.4,0.5,0.9,0.8,1.3c0.5,0.9,0.9,1.7,1.2,2.6c0.7,1.8,1.4,3.6,1.9,5.4c1.1,3.6,1.8,7.3,2.6,11c1.5,7.4,2.8,14.7,4,22.1
				c2.3,14.8,3.8,29.8,4,44.8c0.1,7.5-0.2,15.1-1.2,22.6c-0.5,3.8-1.3,7.5-2.4,11.2c-1.2,3.7-2.7,7.3-5.3,10.4
				c-2.5,3.1-6.5,5.4-10.6,5.5c-1,0-2,0.1-3.1-0.2c-1.2-0.3-2.2-0.9-3-1.7c-1.6-1.8-2.1-3.9-2.3-5.9c-0.4-4,0.1-7.8,0.7-11.5
				c0.6-3.7,1.5-7.4,2.4-11c3.9-14.5,8.8-28.6,13.4-42.8C89.6,110.2,94.3,96,99.1,82c4.8-14.1,9.7-28.2,13.2-42.5
				c1.7-7.2,3.2-14.4,3.4-21.6c0.1-3.5-0.2-7.1-1.6-9.9c-0.7-1.4-1.6-2.4-2.9-3c-1.2-0.6-2.8-0.8-4.4-0.8l0.2,0
				c-2.1,0.2-4,3.2-5.1,6.2c-1.1,3.1-1.8,6.4-2.3,9.8c-0.9,6.8-1.1,13.7-1,20.7c0.3,13.9,1.9,27.8,4.9,41.4
				c1.5,6.8,3.3,13.5,5.9,19.9c1.3,3.2,2.8,6.3,4.7,9.2c1.9,2.8,4.2,5.4,7.4,6.4c1.5,0.6,3.2,0.8,4.8,0.5c1.6-0.3,3-1.2,4.2-2.3
				c2.4-2.4,3.7-5.7,4.5-9c0.7-3.4,0.8-6.9,0.3-10.3c-0.5-3.4-1.8-6.8-3.9-9.6c2.3,2.7,3.7,6,4.4,9.5c0.7,3.5,0.7,7.1,0.1,10.6
				c-0.6,3.5-1.9,7-4.4,9.7c-1.3,1.3-2.9,2.4-4.8,2.8c-1.9,0.4-3.8,0.2-5.6-0.3c-1.8-0.6-3.4-1.5-4.8-2.7c-1.4-1.2-2.6-2.6-3.6-4.1
				c-2.1-2.9-3.7-6.1-5.1-9.4c-2.8-6.5-4.8-13.3-6.5-20.2C97.8,69,95.8,55,95.2,40.9c-0.3-7.1-0.3-14.2,0.6-21.3
				c0.5-3.6,1.1-7.1,2.4-10.7c0.6-1.8,1.4-3.5,2.6-5.2c1.2-1.6,3.1-3.3,5.6-3.7l0.1,0l0.1,0c2.1-0.1,4.4,0.1,6.5,1.1
				c2.1,1,3.8,2.9,4.8,4.8c2,4,2.2,8,2.2,11.9c-0.1,7.8-1.6,15.3-3.3,22.6c-3.5,14.7-8.1,29-13,43.1c-4.9,14.1-10.6,28-15.9,41.9
				c-5.4,13.9-10.5,28-14.1,42.4c-0.9,3.6-1.7,7.2-2.3,10.8c-0.6,3.6-1,7.3-0.6,10.8c0.2,1.7,0.7,3.4,1.7,4.4c0.9,1,2.4,1.2,4.2,1.1
				c3.4-0.2,6.5-2,8.6-4.7c2.2-2.7,3.6-6.1,4.6-9.5c1-3.5,1.7-7.1,2.1-10.7c0.9-7.3,0.9-14.7,0.7-22.1c-0.5-14.8-2.4-29.6-4.6-44.2
				c-1.2-7.3-2.5-14.6-4-21.9c-0.8-3.6-1.6-7.2-2.4-10.9c-0.4-1.8-0.7-3.6-1-5.5l-0.4-2.7l-0.2-1.3L80,60.8l0-0.2c0,0,0,0,0,0
				c0,0,0.1,0,0.1,0c0.1,0,0.2,0.1,0.3,0l0.3-0.1v0c0.1,0-0.1,0.3-0.1,0.5c-0.1,0.3-0.1,0.5-0.2,0.8l-0.3,1.8l-0.5,3.6
				c-0.4,2.4-0.8,4.8-1.4,7.2c-1.1,4.8-2.7,9.4-4.8,13.9c-4.2,8.9-10.2,17.1-17.9,23.3c-7.7,6.2-17.1,10.1-26.6,11.9
				C19.4,125.3,9.6,125.3,0,124.1z"/>
			<circle fill="#357EFC" cx="79.7" cy="50.2" r="2.3"/>
		</g>
	</g>
	</svg>
	<div class="links right">
		<span>
			<a href="/work.html">work</a>
			<a href="/blog">posts</a>
		</span>
	</div>
</header>


      <div id="content">
        <div class='post-header'><a href='maps-kml.html'><h1>KML from Google Maps</h1></a><ul><li>By Jessica Lord</li> <li>2015-04-26</li> <li>maps, web dev</li></ul></div><div class='post-body'><p>I wanted to make a map of a <a href="https://jlord.exposure.co/rivendell-kaitoke">little trek</a> I did to Rivendell in New Zealand (NBD!). Here is what I learned about getting map data out of Google Maps (KML) to create a <a href="http://www.mapbox.com">Mapbox</a> map.</p>
<p><iframe width='100%' height='300px' frameBorder='0' src='https://a.tiles.mapbox.com/v4/jllord.m08a6002/attribution,zoompan,geocoder,share.html?access_token=pk.eyJ1Ijoiamxsb3JkIiwiYSI6IkVwNUd4eWsifQ.dxpWPAYZle0eUvwXWGi8Cw'></iframe>
<em>Map of train, bus, walking and hiking from Wellington to Kaitoke and Rivendell in Wellington, NZ</em></p>
<p>Mapbox makes great software and beautiful maps (see above!). This is why I didn&#39;t attempt to just do the whole thing in Google Maps. I used Mapbox&#39;s online map making tool, <a href="https://www.mapbox.com/editor/#welcome">Editor</a>, which accepts <code>kml</code>, the format that Google Maps use. However:</p>
<p><em>You cannot export <code>kml</code> from regular maps.google.com.</em></p>
<p>I learned that the only way to export <code>kml</code> from Google Maps was to log in and <a href="https://www.google.com/url?sa=t&amp;rct=j&amp;url=https%3A%2F%2Fmapsengine.google.com%2Fmap%2Fmp%3Fhl%3Den%26authuser%3D0%26state%3Dcreate&amp;source=maps&amp;ei=3JQ9Vbr4OsmyogTA3IGoDg&amp;usg=AFQjCNGErPyM4x5kFCq4MyvD9xRKN8C1zA&amp;sig2=65b8bK8VYjGHptwugnP0_A&amp;ved=0CAcQlTQoBQ">create a map in the My Maps</a> option. However:</p>
<p><em>The maps in My Maps do not support transit directions.</em></p>
<p>Which was a bummer because I was wanting to include the train and bus routes in my map. Fortunately the bus route was relatively simple so I opened it in Google Maps in one tab and then drew the route in My Maps by drawing lines that snap to roads (lines don&#39;t snap to roads in Mapbox Editor). I drew the train route with straight lines directly in Mapbox Editor.</p>
<p>Next, I selected to export as <code>kml</code>. Then selected the layer I wanted to export.</p>
<p><img src="https://s3.amazonaws.com/f.cl.ly/items/2R3h0H1J0Z3r0C241P2G/export-google-maps-kml.png" alt="kml"></p>
<p>At this point you&#39;ll see that you actually get a compressed <code>kmz</code> rather than <code>kml</code>. You&#39;ll need to do a few things in order to get at that <code>kml</code>. Change the <code>kmz</code> extension to &#39;zip&#39; and unzip it. Inside you&#39;ll find a few files. You can do this via terminal:</p>
<pre><code class="lang-bash"># copy it as a zip file, keeping original just in case
cp downloadedMap.kml downloadedMap.zip
# unzip it
unzip downloadedMap.zip
# rename it, if you want
mv doc.kml myMap.kml
</code></pre>
<p>Now you have a couple image files and a <code>doc.kml</code>. The latter is the <code>kml</code> you want. You may want to rename it at this point (especially if you&#39;re doing this multiple times) and trash the images. Now you can import this <code>kml</code> into Mapbox Editor and style it, hurray!</p>
<p><img src="https://s3.amazonaws.com/f.cl.ly/items/3w052f1T1E03460W0H0m/import-mapbox-editor.png" alt="import"></p>
<p>I also ended up using the Google My Maps to trace a path from satellite images because the Mapbox tiles didn&#39;t zoom in as close as I wanted. There was a lot of trial and error in my discovering each of these things and the map took way longer than it should have, so I hope this helps someone else!</p>
<p>Let me know if there are better ways of getting data from transit directions, snap-to-road lines and good satellite imagery (<a href="http://twitter.com/jllord">@jllord</a>).</p>
</div>
      </div>

      <footer>
  <p class="about-foot meta">
    Jessica Lord is an open web developer, designer and urbanist in Portland.
  </p>
  <ul class="socials">
    <li><a href="http://www.twitter.com/jllord" target="_blank">@jllord</a></li>
    <li><a href="http://www.github.com/jlord" target="_blank">gh/jlord</a></li>
  </ul>
  <ul>
    <li><a href="/rss.xml">RSS</a></li>
    <li><a href="/blog">Posts</a></li>
  </ul>
  <ul>
    <li><a href="/work.html">Work</a></li>
    <li><a href="/about.html">About</a></li>
  </ul>
  <ul>
    <li><a href="/blog/archive.html">Archive</a></li>
    <li><a href="/" class="green"><strong>Home</strong></a></li>
  </ul>
</footer>

    </div>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
